<?xml version="1.0"?>
<AlteryxDocument yxmdVer="11.7">
  <Nodes>
    <Node ToolID="5">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="54" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Passwords>4A7F0A578C7ABA15A9AA4FA67845CB26B41FF6E8C</Passwords>
          <File RecordLimit="" FileFormat="17">32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS
(SELECT ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM
  ,f.SALE_HOUR 
  ,f.STORE_NUMBER
  ,f.BUSINESS_DATE
  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS "TRANS"
      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am
        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday
        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm
        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening
        ELSE 0 
        END) AS DAY_PART
FROM APPBUS.AFT_POS_INTL_HDR_VW f
    INNER JOIN APPDWH.ADT_CAL ca
        ON f.BUSINESS_DATE = ca.CAL_DT
        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3
        AND f.COUNTRY_CODE = 'US'
    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r
        ON f.STORE_NUMBER = r.STORE_NUM
GROUP BY 
  ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM
  ,f.STORE_NUMBER
  ,f.BUSINESS_DATE
  ,f.SALE_HOUR)
  SELECT SQ.FSCL_YR_NUM
  , SQ.FSCL_QTR_IN_YR_NUM
  , SQ.DAY_PART
  , SUM(SQ.TRANS) AS TRANS
  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT
  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT
  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT
  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD
  FROM SQ
  GROUP BY SQ.FSCL_YR_NUM
  , SQ.FSCL_QTR_IN_YR_NUM
  , SQ.DAY_PART
  ORDER BY SQ.DAY_PART</File>
          <FormatSpecificOptions>
            <ForceSqlWcharSupport>False</ForceSqlWcharSupport>
            <ReadCentroids>False</ReadCentroids>
            <TableStyle>Quoted</TableStyle>
            <NoProgress>False</NoProgress>
            <CacheData>False</CacheData>
            <PostSQL />
            <PreSQL />
          </FormatSpecificOptions>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText>__EncPwd1__@SBP411.WORLD
Table=WITH SQ AS
(SELECT ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM
  ,f.SALE_HOUR 
  ,f.STORE_NUMBER
  ,f.BUSINESS_DATE
  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS "TRANS"
      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am
        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday
        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm
        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening
        ELSE 0 
        END) AS DAY_PART
FROM APPBUS.AFT_POS_INTL_HDR_VW f
    INNER JOIN APPDWH.ADT_CAL ca
        ON f.BUSINESS_DATE = ca.CAL_DT
        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3
        AND f.COUNTRY_CODE = 'US'
    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r
        ON f.STORE_NUMBER = r.STORE_NUM
GROUP BY 
  ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM
  ,f.STORE_NUMBER
  ,f.BUSINESS_DATE
  ,f.SALE_HOUR)
  SELECT SQ.FSCL_YR_NUM
  , SQ.FSCL_QTR_IN_YR_NUM
  , SQ.DAY_PART
  , SUM(SQ.TRANS) AS TRANS
  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT
  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT
  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT
  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD
  FROM SQ
  GROUP BY SQ.FSCL_YR_NUM
  , SQ.FSCL_QTR_IN_YR_NUM
  , SQ.DAY_PART
  ORDER BY SQ.DAY_PART</DefaultAnnotationText>
          <Left value="False" />
        </Annotation>
        <MetaInfo connection="Output">
          <RecordInfo>
            <Field name="FSCL_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Int64" />
            <Field name="FSCL_QTR_IN_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Int64" />
            <Field name="DAY_PART" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Double" />
            <Field name="TRANS" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Double" />
            <Field name="DAY_COUNT" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Double" />
            <Field name="STORE_COUNT" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Double" />
            <Field name="ACTIVE_STORE_DAY_COUNT" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Double" />
            <Field name="COSD" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.SALE_HOUR &#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,SUM(f.CUTOMER_TRANSACTION_COUNT) AS &quot;TRANS&quot;&#xA;      ,(CASE WHEN f.SALE_HOUR  &lt; 110000 THEN 1 -- am&#xA;        WHEN f.SALE_HOUR  &gt;=110000 AND f.SALE_HOUR  &lt; 140000 THEN 2 -- midday&#xA;        WHEN f.SALE_HOUR  &gt;=140000 AND f.SALE_HOUR  &lt; 160000 THEN 3 -- pm&#xA;        WHEN f.SALE_HOUR  &gt;=160000 THEN 4 -- evening&#xA;        ELSE 0 &#xA;        END) AS DAY_PART&#xA;FROM APPBUS.AFT_POS_INTL_HDR_VW f&#xA;    INNER JOIN APPDWH.ADT_CAL ca&#xA;        ON f.BUSINESS_DATE = ca.CAL_DT&#xA;        AND ca.FSCL_YR_NUM = 2018 AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;        AND f.COUNTRY_CODE = 'US'&#xA;    INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST r&#xA;        ON f.STORE_NUMBER = r.STORE_NUM&#xA;GROUP BY &#xA;  ca.FSCL_YR_NUM&#xA;  ,ca.FSCL_QTR_IN_YR_NUM&#xA;  ,f.STORE_NUMBER&#xA;  ,f.BUSINESS_DATE&#xA;  ,f.SALE_HOUR)&#xA;  SELECT SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  , SUM(SQ.TRANS) AS TRANS&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE)) AS DAY_COUNT&#xA;  , COUNT(UNIQUE(SQ.STORE_NUMBER)) AS STORE_COUNT&#xA;  , COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER)) AS ACTIVE_STORE_DAY_COUNT&#xA;  , ROUND(SUM(SQ.TRANS)/(COUNT(UNIQUE(SQ.BUSINESS_DATE))*COUNT(UNIQUE(SQ.STORE_NUMBER))),0) AS COSD&#xA;  FROM SQ&#xA;  GROUP BY SQ.FSCL_YR_NUM&#xA;  , SQ.FSCL_QTR_IN_YR_NUM&#xA;  , SQ.DAY_PART&#xA;  ORDER BY SQ.DAY_PART" type="Double" />
          </RecordInfo>
        </MetaInfo>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxDbFileInput" />
    </Node>
    <Node ToolID="6">
      <GuiSettings Plugin="AlteryxBasePluginsGui.BrowseV2.BrowseV2">
        <Position x="126" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <TempFile>C:\Users\jumorris\AppData\Local\Temp\Engine_8580_5ddeb44d7d114d66b52e8566df9e6193_\Engine_7884_531f7fa0ab714bc99b3c95aaac7658f3_.yxdb</TempFile>
          <TempFileDataProfiling />
          <Layout>
            <ViewMode>Single</ViewMode>
            <ViewSize value="100" />
            <View1>
              <DefaultTab>Profile</DefaultTab>
              <Hints>
                <Table />
              </Hints>
            </View1>
            <View2 />
          </Layout>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxBrowseV2" />
    </Node>
    <Node ToolID="7">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="66" y="54" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>COSD by Day Part</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="8">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="66" y="102" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Pre-11am, 11-2,
2-4, 4-close</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="44">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="198" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Passwords>4A7F0A578C7ABA15A9AA4FA67845CB26B41FF6E8C</Passwords>
          <File RecordLimit="" FileFormat="17">32bit:oci:JUMORRIS/__EncPwd1__@SBP416.WORLD|||/*query for CC score and survey counts by daypart by store */
/*CAW*/
WITH sq AS
(SELECT DISTINCT
  TO_CHAR(sr.TRANS_DTM, 'HH24') AS HOUR
    ,(CASE WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &lt; 11 THEN '1_early_am_am' 
        WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &gt;=11 AND TO_CHAR(sr.TRANS_DTM, 'HH24') &lt; 14 THEN '2_midday' -- midday
        WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &gt;=14 AND TO_CHAR(sr.TRANS_DTM, 'HH24') &lt; 16 THEN '3_pm' -- pm
        WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &gt;=16 THEN '4_late_pm' -- late pm
        ELSE 'NA' 
        END) AS DAY_PART
  ,sr.QSTN_ID
  ,SUM(CASE  WHEN sr.RSPNS_ID = '5' AND sr.QSTN_ID = 'Q1' THEN COALESCE(w.WEIGHT_RT,1) /* coalesce returns non-null weight value, OR if null, returns 1 */
    WHEN sr.RSPNS_ID = '7' THEN COALESCE(w.WEIGHT_RT,1) ELSE 0 END) AS TOTAL_TB
  ,SUM(COALESCE(w.WEIGHT_RT,1)) AS TOTAL_RSPNS
  ,ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM

FROM APPOTHER.AFT_CV_SRVY_RSPNS sr

JOIN APPCA.D_CAL ca
  ON ca.CAL_DT = TRUNC(sr.TRANS_DTM)
  
JOIN APPCA.D_STORE_VERS st
  ON sr.STORE_NUM = st.STORE_NUM
    AND st.CURRENT_FLG = 'Y'
    AND st.OWNR_TYPE_CD = 'CO'
    AND st.CNTRY_CD_2_DGT_ISO = 'US'
    
LEFT JOIN APPOTHER.CUST_INS_WEIGHTS w
  ON sr.CASE_ID = w.CASE_ID

  WHERE sr.QSTN_ID IN ('Q2_2')
  AND sr.RSPNS_ID &lt;&gt; '9'
  AND ca.FSCL_YR_NUM IN (2017,2018) 
  AND ca.FSCL_QTR_IN_YR_NUM IN (3)

GROUP BY
  TO_CHAR(sr.TRANS_DTM, 'HH24') 
  --,sr.STORE_NUM
  ,sr.QSTN_ID
  ,ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM
)
SELECT 
sq.QSTN_ID
,sq.DAY_PART
,SUM(sq.TOTAL_TB) AS TOTAL_TB
,SUM(sq.TOTAL_RSPNS) AS TOTAL_RSPNS
,ROUND(SUM(sq.TOTAL_TB)/SUM(sq.TOTAL_RSPNS),3) AS TB_SCORE
,sq.FSCL_YR_NUM
,sq.FSCL_QTR_IN_YR_NUM
FROM sq

--WHERE sq.DAY_PART IN ('am','pm')

GROUP BY 
sq.QSTN_ID
,sq.DAY_PART
,sq.FSCL_YR_NUM
,sq.FSCL_QTR_IN_YR_NUM

ORDER BY sq.FSCL_YR_NUM
,sq.FSCL_QTR_IN_YR_NUM
,sq.DAY_PART</File>
          <FormatSpecificOptions>
            <ForceSqlWcharSupport>False</ForceSqlWcharSupport>
            <ReadCentroids>False</ReadCentroids>
            <TableStyle>Quoted</TableStyle>
            <NoProgress>False</NoProgress>
            <CacheData>False</CacheData>
            <PostSQL />
            <PreSQL />
          </FormatSpecificOptions>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText>__EncPwd1__@SBP416.WORLD
Table=/*query for CC score and survey counts by daypart by store */
/*CAW*/
WITH sq AS
(SELECT DISTINCT
  TO_CHAR(sr.TRANS_DTM, 'HH24') AS HOUR
    ,(CASE WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &lt; 11 THEN '1_early_am_am' 
        WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &gt;=11 AND TO_CHAR(sr.TRANS_DTM, 'HH24') &lt; 14 THEN '2_midday' -- midday
        WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &gt;=14 AND TO_CHAR(sr.TRANS_DTM, 'HH24') &lt; 16 THEN '3_pm' -- pm
        WHEN TO_CHAR(sr.TRANS_DTM, 'HH24') &gt;=16 THEN '4_late_pm' -- late pm
        ELSE 'NA' 
        END) AS DAY_PART
  ,sr.QSTN_ID
  ,SUM(CASE  WHEN sr.RSPNS_ID = '5' AND sr.QSTN_ID = 'Q1' THEN COALESCE(w.WEIGHT_RT,1) /* coalesce returns non-null weight value, OR if null, returns 1 */
    WHEN sr.RSPNS_ID = '7' THEN COALESCE(w.WEIGHT_RT,1) ELSE 0 END) AS TOTAL_TB
  ,SUM(COALESCE(w.WEIGHT_RT,1)) AS TOTAL_RSPNS
  ,ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM

FROM APPOTHER.AFT_CV_SRVY_RSPNS sr

JOIN APPCA.D_CAL ca
  ON ca.CAL_DT = TRUNC(sr.TRANS_DTM)
  
JOIN APPCA.D_STORE_VERS st
  ON sr.STORE_NUM = st.STORE_NUM
    AND st.CURRENT_FLG = 'Y'
    AND st.OWNR_TYPE_CD = 'CO'
    AND st.CNTRY_CD_2_DGT_ISO = 'US'
    
LEFT JOIN APPOTHER.CUST_INS_WEIGHTS w
  ON sr.CASE_ID = w.CASE_ID

  WHERE sr.QSTN_ID IN ('Q2_2')
  AND sr.RSPNS_ID &lt;&gt; '9'
  AND ca.FSCL_YR_NUM IN (2017,2018) 
  AND ca.FSCL_QTR_IN_YR_NUM IN (3)

GROUP BY
  TO_CHAR(sr.TRANS_DTM, 'HH24') 
  --,sr.STORE_NUM
  ,sr.QSTN_ID
  ,ca.FSCL_YR_NUM
  ,ca.FSCL_QTR_IN_YR_NUM
)
SELECT 
sq.QSTN_ID
,sq.DAY_PART
,SUM(sq.TOTAL_TB) AS TOTAL_TB
,SUM(sq.TOTAL_RSPNS) AS TOTAL_RSPNS
,ROUND(SUM(sq.TOTAL_TB)/SUM(sq.TOTAL_RSPNS),3) AS TB_SCORE
,sq.FSCL_YR_NUM
,sq.FSCL_QTR_IN_YR_NUM
FROM sq

--WHERE sq.DAY_PART IN ('am','pm')

GROUP BY 
sq.QSTN_ID
,sq.DAY_PART
,sq.FSCL_YR_NUM
,sq.FSCL_QTR_IN_YR_NUM

ORDER BY sq.FSCL_YR_NUM
,sq.FSCL_QTR_IN_YR_NUM
,sq.DAY_PART</DefaultAnnotationText>
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxDbFileInput" />
    </Node>
    <Node ToolID="45">
      <GuiSettings Plugin="AlteryxBasePluginsGui.BrowseV2.BrowseV2">
        <Position x="270" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <TempFile>C:\Users\jumorris\AppData\Local\Temp\Engine_8580_5ddeb44d7d114d66b52e8566df9e6193_\Engine_7884_2870300d9337458cb593a7f0e6f33fc9_.yxdb</TempFile>
          <TempFileDataProfiling />
          <Layout>
            <ViewMode>Single</ViewMode>
            <ViewSize value="100" />
            <View1>
              <DefaultTab>Profile</DefaultTab>
              <Hints>
                <Table />
              </Hints>
            </View1>
            <View2 />
          </Layout>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxBrowseV2" />
    </Node>
    <Node ToolID="46">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="210" y="54" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>CC by Day Part</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="47">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="210" y="102" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Pre-11am, 11-2,
2-4, 4-close</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="48">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="366" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Passwords>4A7F0A578C7ABA15A9AA4FA67845CB26B41FF6E8C</Passwords>
          <File RecordLimit="" FileFormat="17">32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD||| SELECT ca.FSCL_YR_NUM
        , ca.FSCL_QTR_IN_YR_NUM
        , f.STORE_NUMBER
        , SUM(f.NET_DISCOUNTED_SALES_AMT) "QuarterlySales"
        , SUM(f.NET_DISCOUNTED_SALES_LY_AMT) "LYQuarterlySales"
        --, ROUND((SUM(f.NET_DISCOUNTED_SALES_AMT) - SUM(f.NET_DISCOUNTED_SALES_LY_AMT)) / SUM(f.NET_DISCOUNTED_SALES_LY_AMT),4) AS salescomp

    FROM APPBUS.DFT_INTL_STORE_DAY_VW f      
        
        INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
            ON f.STORE_NUMBER = org.STORE_NUM
            AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- US CO stores
        
        INNER JOIN APPDWH.ADT_CAL ca
            ON f.BUSINESS_DATE = ca.CAL_DT
            AND ca.FSCL_YR_NUM in (2018) 
            AND ca.FSCL_QTR_IN_YR_NUM = 3

        INNER JOIN APPBUS.AFT_STORE_COMP_PER_VW comp
            ON f.STORE_NUMBER = comp.STORE_NUMBER
            AND ca.FSCL_PER_BEG_DT = comp.FISCAL_PERIOD_BEGIN_DATE
            AND COMP_CODE = 'Y'
    
    GROUP BY f.STORE_NUMBER
    , ca.FSCL_YR_NUM
    , ca.FSCL_QTR_IN_YR_NUM</File>
          <FormatSpecificOptions>
            <ForceSqlWcharSupport>False</ForceSqlWcharSupport>
            <ReadCentroids>False</ReadCentroids>
            <TableStyle>Quoted</TableStyle>
            <NoProgress>False</NoProgress>
            <CacheData>False</CacheData>
            <PostSQL />
            <PreSQL />
          </FormatSpecificOptions>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText>__EncPwd1__@SBP411.WORLD
Table= SELECT ca.FSCL_YR_NUM
        , ca.FSCL_QTR_IN_YR_NUM
        , f.STORE_NUMBER
        , SUM(f.NET_DISCOUNTED_SALES_AMT) "QuarterlySales"
        , SUM(f.NET_DISCOUNTED_SALES_LY_AMT) "LYQuarterlySales"
        --, ROUND((SUM(f.NET_DISCOUNTED_SALES_AMT) - SUM(f.NET_DISCOUNTED_SALES_LY_AMT)) / SUM(f.NET_DISCOUNTED_SALES_LY_AMT),4) AS salescomp

    FROM APPBUS.DFT_INTL_STORE_DAY_VW f      
        
        INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
            ON f.STORE_NUMBER = org.STORE_NUM
            AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- US CO stores
        
        INNER JOIN APPDWH.ADT_CAL ca
            ON f.BUSINESS_DATE = ca.CAL_DT
            AND ca.FSCL_YR_NUM in (2018) 
            AND ca.FSCL_QTR_IN_YR_NUM = 3

        INNER JOIN APPBUS.AFT_STORE_COMP_PER_VW comp
            ON f.STORE_NUMBER = comp.STORE_NUMBER
            AND ca.FSCL_PER_BEG_DT = comp.FISCAL_PERIOD_BEGIN_DATE
            AND COMP_CODE = 'Y'
    
    GROUP BY f.STORE_NUMBER
    , ca.FSCL_YR_NUM
    , ca.FSCL_QTR_IN_YR_NUM</DefaultAnnotationText>
          <Left value="False" />
        </Annotation>
        <MetaInfo connection="Output">
          <RecordInfo>
            <Field name="FSCL_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD||| SELECT ca.FSCL_YR_NUM&#xA;        , ca.FSCL_QTR_IN_YR_NUM&#xA;        , f.STORE_NUMBER&#xA;        , SUM(f.NET_DISCOUNTED_SALES_AMT) &quot;QuarterlySales&quot;&#xA;        , SUM(f.NET_DISCOUNTED_SALES_LY_AMT) &quot;LYQuarterlySales&quot;&#xA;        --, ROUND((SUM(f.NET_DISCOUNTED_SALES_AMT) - SUM(f.NET_DISCOUNTED_SALES_LY_AMT)) / SUM(f.NET_DISCOUNTED_SALES_LY_AMT),4) AS salescomp&#xA;&#xA;    FROM APPBUS.DFT_INTL_STORE_DAY_VW f      &#xA;        &#xA;        INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;            ON f.STORE_NUMBER = org.STORE_NUM&#xA;            AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- US CO stores&#xA;        &#xA;        INNER JOIN APPDWH.ADT_CAL ca&#xA;            ON f.BUSINESS_DATE = ca.CAL_DT&#xA;            AND ca.FSCL_YR_NUM in (2018) &#xA;            AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;        INNER JOIN APPBUS.AFT_STORE_COMP_PER_VW comp&#xA;            ON f.STORE_NUMBER = comp.STORE_NUMBER&#xA;            AND ca.FSCL_PER_BEG_DT = comp.FISCAL_PERIOD_BEGIN_DATE&#xA;            AND COMP_CODE = 'Y'&#xA;    &#xA;    GROUP BY f.STORE_NUMBER&#xA;    , ca.FSCL_YR_NUM&#xA;    , ca.FSCL_QTR_IN_YR_NUM" type="Int64" />
            <Field name="FSCL_QTR_IN_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD||| SELECT ca.FSCL_YR_NUM&#xA;        , ca.FSCL_QTR_IN_YR_NUM&#xA;        , f.STORE_NUMBER&#xA;        , SUM(f.NET_DISCOUNTED_SALES_AMT) &quot;QuarterlySales&quot;&#xA;        , SUM(f.NET_DISCOUNTED_SALES_LY_AMT) &quot;LYQuarterlySales&quot;&#xA;        --, ROUND((SUM(f.NET_DISCOUNTED_SALES_AMT) - SUM(f.NET_DISCOUNTED_SALES_LY_AMT)) / SUM(f.NET_DISCOUNTED_SALES_LY_AMT),4) AS salescomp&#xA;&#xA;    FROM APPBUS.DFT_INTL_STORE_DAY_VW f      &#xA;        &#xA;        INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;            ON f.STORE_NUMBER = org.STORE_NUM&#xA;            AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- US CO stores&#xA;        &#xA;        INNER JOIN APPDWH.ADT_CAL ca&#xA;            ON f.BUSINESS_DATE = ca.CAL_DT&#xA;            AND ca.FSCL_YR_NUM in (2018) &#xA;            AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;        INNER JOIN APPBUS.AFT_STORE_COMP_PER_VW comp&#xA;            ON f.STORE_NUMBER = comp.STORE_NUMBER&#xA;            AND ca.FSCL_PER_BEG_DT = comp.FISCAL_PERIOD_BEGIN_DATE&#xA;            AND COMP_CODE = 'Y'&#xA;    &#xA;    GROUP BY f.STORE_NUMBER&#xA;    , ca.FSCL_YR_NUM&#xA;    , ca.FSCL_QTR_IN_YR_NUM" type="Int64" />
            <Field name="STORE_NUMBER" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD||| SELECT ca.FSCL_YR_NUM&#xA;        , ca.FSCL_QTR_IN_YR_NUM&#xA;        , f.STORE_NUMBER&#xA;        , SUM(f.NET_DISCOUNTED_SALES_AMT) &quot;QuarterlySales&quot;&#xA;        , SUM(f.NET_DISCOUNTED_SALES_LY_AMT) &quot;LYQuarterlySales&quot;&#xA;        --, ROUND((SUM(f.NET_DISCOUNTED_SALES_AMT) - SUM(f.NET_DISCOUNTED_SALES_LY_AMT)) / SUM(f.NET_DISCOUNTED_SALES_LY_AMT),4) AS salescomp&#xA;&#xA;    FROM APPBUS.DFT_INTL_STORE_DAY_VW f      &#xA;        &#xA;        INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;            ON f.STORE_NUMBER = org.STORE_NUM&#xA;            AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- US CO stores&#xA;        &#xA;        INNER JOIN APPDWH.ADT_CAL ca&#xA;            ON f.BUSINESS_DATE = ca.CAL_DT&#xA;            AND ca.FSCL_YR_NUM in (2018) &#xA;            AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;        INNER JOIN APPBUS.AFT_STORE_COMP_PER_VW comp&#xA;            ON f.STORE_NUMBER = comp.STORE_NUMBER&#xA;            AND ca.FSCL_PER_BEG_DT = comp.FISCAL_PERIOD_BEGIN_DATE&#xA;            AND COMP_CODE = 'Y'&#xA;    &#xA;    GROUP BY f.STORE_NUMBER&#xA;    , ca.FSCL_YR_NUM&#xA;    , ca.FSCL_QTR_IN_YR_NUM" type="Double" />
            <Field name="QuarterlySales" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD||| SELECT ca.FSCL_YR_NUM&#xA;        , ca.FSCL_QTR_IN_YR_NUM&#xA;        , f.STORE_NUMBER&#xA;        , SUM(f.NET_DISCOUNTED_SALES_AMT) &quot;QuarterlySales&quot;&#xA;        , SUM(f.NET_DISCOUNTED_SALES_LY_AMT) &quot;LYQuarterlySales&quot;&#xA;        --, ROUND((SUM(f.NET_DISCOUNTED_SALES_AMT) - SUM(f.NET_DISCOUNTED_SALES_LY_AMT)) / SUM(f.NET_DISCOUNTED_SALES_LY_AMT),4) AS salescomp&#xA;&#xA;    FROM APPBUS.DFT_INTL_STORE_DAY_VW f      &#xA;        &#xA;        INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;            ON f.STORE_NUMBER = org.STORE_NUM&#xA;            AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- US CO stores&#xA;        &#xA;        INNER JOIN APPDWH.ADT_CAL ca&#xA;            ON f.BUSINESS_DATE = ca.CAL_DT&#xA;            AND ca.FSCL_YR_NUM in (2018) &#xA;            AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;        INNER JOIN APPBUS.AFT_STORE_COMP_PER_VW comp&#xA;            ON f.STORE_NUMBER = comp.STORE_NUMBER&#xA;            AND ca.FSCL_PER_BEG_DT = comp.FISCAL_PERIOD_BEGIN_DATE&#xA;            AND COMP_CODE = 'Y'&#xA;    &#xA;    GROUP BY f.STORE_NUMBER&#xA;    , ca.FSCL_YR_NUM&#xA;    , ca.FSCL_QTR_IN_YR_NUM" type="Double" />
            <Field name="LYQuarterlySales" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD||| SELECT ca.FSCL_YR_NUM&#xA;        , ca.FSCL_QTR_IN_YR_NUM&#xA;        , f.STORE_NUMBER&#xA;        , SUM(f.NET_DISCOUNTED_SALES_AMT) &quot;QuarterlySales&quot;&#xA;        , SUM(f.NET_DISCOUNTED_SALES_LY_AMT) &quot;LYQuarterlySales&quot;&#xA;        --, ROUND((SUM(f.NET_DISCOUNTED_SALES_AMT) - SUM(f.NET_DISCOUNTED_SALES_LY_AMT)) / SUM(f.NET_DISCOUNTED_SALES_LY_AMT),4) AS salescomp&#xA;&#xA;    FROM APPBUS.DFT_INTL_STORE_DAY_VW f      &#xA;        &#xA;        INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;            ON f.STORE_NUMBER = org.STORE_NUM&#xA;            AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- US CO stores&#xA;        &#xA;        INNER JOIN APPDWH.ADT_CAL ca&#xA;            ON f.BUSINESS_DATE = ca.CAL_DT&#xA;            AND ca.FSCL_YR_NUM in (2018) &#xA;            AND ca.FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;        INNER JOIN APPBUS.AFT_STORE_COMP_PER_VW comp&#xA;            ON f.STORE_NUMBER = comp.STORE_NUMBER&#xA;            AND ca.FSCL_PER_BEG_DT = comp.FISCAL_PERIOD_BEGIN_DATE&#xA;            AND COMP_CODE = 'Y'&#xA;    &#xA;    GROUP BY f.STORE_NUMBER&#xA;    , ca.FSCL_YR_NUM&#xA;    , ca.FSCL_QTR_IN_YR_NUM" type="Double" />
          </RecordInfo>
        </MetaInfo>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxDbFileInput" />
    </Node>
    <Node ToolID="49">
      <GuiSettings Plugin="AlteryxBasePluginsGui.BrowseV2.BrowseV2">
        <Position x="438" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <TempFile>C:\Users\jumorris\AppData\Local\Temp\Engine_8580_5ddeb44d7d114d66b52e8566df9e6193_\Engine_7884_15ad210d97ca405991bc41683af7be78_.yxdb</TempFile>
          <TempFileDataProfiling />
          <Layout>
            <ViewMode>Single</ViewMode>
            <ViewSize value="100" />
            <View1>
              <DefaultTab>Profile</DefaultTab>
              <Hints>
                <Table />
              </Hints>
            </View1>
            <View2 />
          </Layout>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxBrowseV2" />
    </Node>
    <Node ToolID="50">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="366" y="54" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Sales Comp</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="51">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="366" y="102" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>At store level, to quartile and link to CC</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="52">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="522" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Passwords>4A7F0A578C7ABA15A9AA4FA67845CB26B41FF6E8C</Passwords>
          <File RecordLimit="" FileFormat="17">32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT
      ce.STORE_NUM
      ,c.FSCL_YR_NUM
      ,c.FSCL_QTR_IN_YR_NUM

  -- Total valid response counts by question
  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total

  -- Total top box responses
  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt

  -- Compute top box scores for each question
  --,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL
  -- ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)
  --  / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score

FROM APPDWH.AFT_CV_SRVY_RSPNS ce

  INNER JOIN APPDWH.ADT_CAL c
    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT
      
  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
    ON ce.STORE_NUM = org.STORE_NUM
      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery
      AND c.FSCL_YR_NUM = 2018 AND FSCL_QTR_IN_YR_NUM = 3

WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions
  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores

GROUP BY
      ce.STORE_NUM
      ,c.FSCL_YR_NUM
      ,c.FSCL_QTR_IN_YR_NUM

ORDER BY
      ce.STORE_NUM
      ,c.FSCL_YR_NUM
      ,c.FSCL_QTR_IN_YR_NUM</File>
          <FormatSpecificOptions>
            <ForceSqlWcharSupport>False</ForceSqlWcharSupport>
            <ReadCentroids>False</ReadCentroids>
            <TableStyle>Quoted</TableStyle>
            <NoProgress>False</NoProgress>
            <CacheData>False</CacheData>
            <PostSQL />
            <PreSQL />
          </FormatSpecificOptions>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText>__EncPwd1__@SBP411.WORLD
Table=SELECT
      ce.STORE_NUM
      ,c.FSCL_YR_NUM
      ,c.FSCL_QTR_IN_YR_NUM

  -- Total valid response counts by question
  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total

  -- Total top box responses
  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt

  -- Compute top box scores for each question
  --,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL
  -- ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)
  --  / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score

FROM APPDWH.AFT_CV_SRVY_RSPNS ce

  INNER JOIN APPDWH.ADT_CAL c
    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT
      
  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
    ON ce.STORE_NUM = org.STORE_NUM
      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery
      AND c.FSCL_YR_NUM = 2018 AND FSCL_QTR_IN_YR_NUM = 3

WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions
  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores

GROUP BY
      ce.STORE_NUM
      ,c.FSCL_YR_NUM
      ,c.FSCL_QTR_IN_YR_NUM

ORDER BY
      ce.STORE_NUM
      ,c.FSCL_YR_NUM
      ,c.FSCL_QTR_IN_YR_NUM</DefaultAnnotationText>
          <Left value="False" />
        </Annotation>
        <MetaInfo connection="Output">
          <RecordInfo>
            <Field name="STORE_NUM" size="11" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  --,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;  -- ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;  --  / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM" type="WString" />
            <Field name="FSCL_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  --,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;  -- ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;  --  / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM" type="Int64" />
            <Field name="FSCL_QTR_IN_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  --,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;  -- ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;  --  / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM" type="Int64" />
            <Field name="Q2_2_RESPONSE_TOTAL" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  --,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;  -- ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;  --  / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM" type="Double" />
            <Field name="Q2_2_TB_CNT" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  --,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;  -- ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;  --  / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      ce.STORE_NUM&#xA;      ,c.FSCL_YR_NUM&#xA;      ,c.FSCL_QTR_IN_YR_NUM" type="Double" />
          </RecordInfo>
        </MetaInfo>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxDbFileInput" />
    </Node>
    <Node ToolID="53">
      <GuiSettings Plugin="AlteryxBasePluginsGui.BrowseV2.BrowseV2">
        <Position x="594" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <TempFile>C:\Users\jumorris\AppData\Local\Temp\Engine_8580_5ddeb44d7d114d66b52e8566df9e6193_\Engine_7884_652204dc665747c2a8d3634f9986c111_.yxdb</TempFile>
          <TempFileDataProfiling />
          <Layout>
            <ViewMode>Single</ViewMode>
            <ViewSize value="100" />
            <View1>
              <DefaultTab>Profile</DefaultTab>
              <Hints>
                <Table />
              </Hints>
            </View1>
            <View2 />
          </Layout>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxBrowseV2" />
    </Node>
    <Node ToolID="54">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="522" y="54" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>CC Scores - Q2 FY18</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="55">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="522" y="102" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>At store level, to link to Comp quartiles</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="56">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="846" y="198" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Passwords>4A7F0A578C7ABA15A9AA4FA67845CB26B41FF6E8C</Passwords>
          <File RecordLimit="" FileFormat="17">32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT
      c.FSCL_YR_NUM
      ,c.FSCL_PER_IN_YR_NUM

  -- Total valid response counts by question
  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total

  -- Total top box responses
  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt

  -- Compute top box scores for each question
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score

FROM APPDWH.AFT_CV_SRVY_RSPNS ce

  INNER JOIN APPDWH.ADT_CAL c
    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT
      
  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
    ON ce.STORE_NUM = org.STORE_NUM
      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery
      AND c.FSCL_YR_NUM = 2018 
      AND FSCL_QTR_IN_YR_NUM = 3

WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions
  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores

GROUP BY
      c.FSCL_YR_NUM
      ,c.FSCL_PER_IN_YR_NUM

ORDER BY
      c.FSCL_YR_NUM
      ,c.FSCL_PER_IN_YR_NUM</File>
          <FormatSpecificOptions>
            <ForceSqlWcharSupport>False</ForceSqlWcharSupport>
            <ReadCentroids>False</ReadCentroids>
            <TableStyle>Quoted</TableStyle>
            <NoProgress>False</NoProgress>
            <CacheData>False</CacheData>
            <PostSQL />
            <PreSQL />
          </FormatSpecificOptions>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText>__EncPwd1__@SBP411.WORLD
Table=SELECT
      c.FSCL_YR_NUM
      ,c.FSCL_PER_IN_YR_NUM

  -- Total valid response counts by question
  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total

  -- Total top box responses
  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt

  -- Compute top box scores for each question
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score

FROM APPDWH.AFT_CV_SRVY_RSPNS ce

  INNER JOIN APPDWH.ADT_CAL c
    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT
      
  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
    ON ce.STORE_NUM = org.STORE_NUM
      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery
      AND c.FSCL_YR_NUM = 2018 
      AND FSCL_QTR_IN_YR_NUM = 3

WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions
  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores

GROUP BY
      c.FSCL_YR_NUM
      ,c.FSCL_PER_IN_YR_NUM

ORDER BY
      c.FSCL_YR_NUM
      ,c.FSCL_PER_IN_YR_NUM</DefaultAnnotationText>
          <Left value="False" />
        </Annotation>
        <MetaInfo connection="Output">
          <RecordInfo>
            <Field name="FSCL_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 &#xA;      AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM" type="Int64" />
            <Field name="FSCL_PER_IN_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 &#xA;      AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM" type="Int64" />
            <Field name="Q2_2_RESPONSE_TOTAL" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 &#xA;      AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM" type="Double" />
            <Field name="Q2_2_TB_CNT" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 &#xA;      AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM" type="Double" />
            <Field name="Q2_2_TB_SCORE" size="8" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||SELECT&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;  -- Total valid response counts by question&#xA;  ,COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) AS Q2_2_Response_Total&#xA;&#xA;  -- Total top box responses&#xA;  ,SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END) AS Q2_2_TB_Cnt&#xA;&#xA;  -- Compute top box scores for each question&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.0000') END AS Q2_2_TB_Score&#xA;&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;      &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;      AND c.FSCL_YR_NUM = 2018 &#xA;      AND FSCL_QTR_IN_YR_NUM = 3&#xA;&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;GROUP BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM&#xA;&#xA;ORDER BY&#xA;      c.FSCL_YR_NUM&#xA;      ,c.FSCL_PER_IN_YR_NUM" type="WString" />
          </RecordInfo>
        </MetaInfo>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxDbFileInput" />
    </Node>
    <Node ToolID="57">
      <GuiSettings Plugin="AlteryxBasePluginsGui.BrowseV2.BrowseV2">
        <Position x="918" y="198" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <TempFile>C:\Users\jumorris\AppData\Local\Temp\Engine_8580_5ddeb44d7d114d66b52e8566df9e6193_\Engine_7884_c9f8eed69fe54553b2f9f2cdb1752154_.yxdb</TempFile>
          <TempFileDataProfiling />
          <Layout>
            <ViewMode>Single</ViewMode>
            <ViewSize value="100" />
            <View1>
              <DefaultTab>Profile</DefaultTab>
              <Hints>
                <Table />
              </Hints>
            </View1>
            <View2 />
          </Layout>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxBrowseV2" />
    </Node>
    <Node ToolID="58">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="846" y="102" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>CC Scores - by Period</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="59">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="846" y="150" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Topline; by month</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="60">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="1002" y="198" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Passwords>4A7F0A578C7ABA15A9AA4FA67845CB26B41FF6E8C</Passwords>
          <File RecordLimit="" FileFormat="17">32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS
(SELECT
    c.FSCL_PER_IN_YR_NUM
    ,c.FSCL_YR_NUM
    ,org.RGN_ORG_LVL_DESCR
  -- Compute top box scores for each question
    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END
   AS Q2_2_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_1_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_3_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_4_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_5_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_6_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_7_TB_Score
FROM APPDWH.AFT_CV_SRVY_RSPNS ce
  INNER JOIN APPDWH.ADT_CAL c
    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT
    AND c.FSCL_PER_IN_YR_NUM = 9
    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   
    
  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
    ON ce.STORE_NUM = org.STORE_NUM
      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery
WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions
  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores


GROUP BY
    c.FSCL_PER_IN_YR_NUM
    ,c.FSCL_YR_NUM
    ,org.RGN_ORG_LVL_DESCR
Order BY
    c.FSCL_YR_NUM
    ,c.FSCL_PER_IN_YR_NUM
), SQ2 AS(
SELECT     
    SQ.FSCL_PER_IN_YR_NUM
    ,SQ.FSCL_YR_NUM
    ,SQ.RGN_ORG_LVL_DESCR
    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE
    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE
FROM SQ
GROUP BY
    SQ.FSCL_YR_NUM
    ,SQ.FSCL_PER_IN_YR_NUM
    ,SQ.Q2_2_TB_Score
    ,SQ.RGN_ORG_LVL_DESCR
Order BY
    SQ.RGN_ORG_LVL_DESCR
    ,SQ.FSCL_YR_NUM DESC
    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(
SELECT
    SQ2.FSCL_YR_NUM
    ,SQ2.RGN_ORG_LVL_DESCR
    ,SQ2.FSCL_PER_IN_YR_NUM
    ,SQ2.CC_SCORE
    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA
    ,SQ2.SO_SCORE
    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA
FROM SQ2
GROUP BY 
    SQ2.FSCL_YR_NUM
    ,SQ2.FSCL_PER_IN_YR_NUM
    ,SQ2.CC_SCORE
    ,SQ2.SO_SCORE
    ,SQ2.RGN_ORG_LVL_DESCR
ORDER BY
    SQ2.RGN_ORG_LVL_DESCR
    ,SQ2.FSCL_YR_NUM DESC
    ,SQ2.FSCL_PER_IN_YR_NUM DESC)
SELECT
    SQ3.RGN_ORG_LVL_DESCR
    ,SQ3.FSCL_YR_NUM
    ,SQ3.FSCL_PER_IN_YR_NUM
    ,SQ3.CC_SCORE
    ,SQ3.SO_SCORE
    ,SQ3.CC_YOY_DELTA
    ,SQ3.SO_YOY_DELTA
FROM SQ3
    WHERE SQ3.FSCL_YR_NUM = 2018</File>
          <FormatSpecificOptions>
            <ForceSqlWcharSupport>False</ForceSqlWcharSupport>
            <ReadCentroids>False</ReadCentroids>
            <TableStyle>Quoted</TableStyle>
            <NoProgress>False</NoProgress>
            <CacheData>False</CacheData>
            <PostSQL />
            <PreSQL />
          </FormatSpecificOptions>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText>__EncPwd1__@SBP411.WORLD
Table=WITH SQ AS
(SELECT
    c.FSCL_PER_IN_YR_NUM
    ,c.FSCL_YR_NUM
    ,org.RGN_ORG_LVL_DESCR
  -- Compute top box scores for each question
    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END
   AS Q2_2_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_1_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_3_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_4_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_5_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_6_TB_Score
  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL
   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)
    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END
   AS Q2_7_TB_Score
FROM APPDWH.AFT_CV_SRVY_RSPNS ce
  INNER JOIN APPDWH.ADT_CAL c
    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT
    AND c.FSCL_PER_IN_YR_NUM = 9
    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   
    
  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org
    ON ce.STORE_NUM = org.STORE_NUM
      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery
WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions
  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores


GROUP BY
    c.FSCL_PER_IN_YR_NUM
    ,c.FSCL_YR_NUM
    ,org.RGN_ORG_LVL_DESCR
Order BY
    c.FSCL_YR_NUM
    ,c.FSCL_PER_IN_YR_NUM
), SQ2 AS(
SELECT     
    SQ.FSCL_PER_IN_YR_NUM
    ,SQ.FSCL_YR_NUM
    ,SQ.RGN_ORG_LVL_DESCR
    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE
    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE
FROM SQ
GROUP BY
    SQ.FSCL_YR_NUM
    ,SQ.FSCL_PER_IN_YR_NUM
    ,SQ.Q2_2_TB_Score
    ,SQ.RGN_ORG_LVL_DESCR
Order BY
    SQ.RGN_ORG_LVL_DESCR
    ,SQ.FSCL_YR_NUM DESC
    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(
SELECT
    SQ2.FSCL_YR_NUM
    ,SQ2.RGN_ORG_LVL_DESCR
    ,SQ2.FSCL_PER_IN_YR_NUM
    ,SQ2.CC_SCORE
    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA
    ,SQ2.SO_SCORE
    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA
FROM SQ2
GROUP BY 
    SQ2.FSCL_YR_NUM
    ,SQ2.FSCL_PER_IN_YR_NUM
    ,SQ2.CC_SCORE
    ,SQ2.SO_SCORE
    ,SQ2.RGN_ORG_LVL_DESCR
ORDER BY
    SQ2.RGN_ORG_LVL_DESCR
    ,SQ2.FSCL_YR_NUM DESC
    ,SQ2.FSCL_PER_IN_YR_NUM DESC)
SELECT
    SQ3.RGN_ORG_LVL_DESCR
    ,SQ3.FSCL_YR_NUM
    ,SQ3.FSCL_PER_IN_YR_NUM
    ,SQ3.CC_SCORE
    ,SQ3.SO_SCORE
    ,SQ3.CC_YOY_DELTA
    ,SQ3.SO_YOY_DELTA
FROM SQ3
    WHERE SQ3.FSCL_YR_NUM = 2018</DefaultAnnotationText>
          <Left value="False" />
        </Annotation>
        <MetaInfo connection="Output">
          <RecordInfo>
            <Field name="RGN_ORG_LVL_DESCR" size="81" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;  -- Compute top box scores for each question&#xA;    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END&#xA;   AS Q2_2_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_1_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_3_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_4_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_5_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_6_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_7_TB_Score&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;    AND c.FSCL_PER_IN_YR_NUM = 9&#xA;    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   &#xA;    &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;&#xA;GROUP BY&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    c.FSCL_YR_NUM&#xA;    ,c.FSCL_PER_IN_YR_NUM&#xA;), SQ2 AS(&#xA;SELECT     &#xA;    SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.FSCL_YR_NUM&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE&#xA;    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE&#xA;FROM SQ&#xA;GROUP BY&#xA;    SQ.FSCL_YR_NUM&#xA;    ,SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.Q2_2_TB_Score&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    SQ.RGN_ORG_LVL_DESCR&#xA;    ,SQ.FSCL_YR_NUM DESC&#xA;    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(&#xA;SELECT&#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA&#xA;FROM SQ2&#xA;GROUP BY &#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;ORDER BY&#xA;    SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_YR_NUM DESC&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM DESC)&#xA;SELECT&#xA;    SQ3.RGN_ORG_LVL_DESCR&#xA;    ,SQ3.FSCL_YR_NUM&#xA;    ,SQ3.FSCL_PER_IN_YR_NUM&#xA;    ,SQ3.CC_SCORE&#xA;    ,SQ3.SO_SCORE&#xA;    ,SQ3.CC_YOY_DELTA&#xA;    ,SQ3.SO_YOY_DELTA&#xA;FROM SQ3&#xA;    WHERE SQ3.FSCL_YR_NUM = 2018" type="V_WString" />
            <Field name="FSCL_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;  -- Compute top box scores for each question&#xA;    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END&#xA;   AS Q2_2_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_1_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_3_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_4_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_5_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_6_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_7_TB_Score&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;    AND c.FSCL_PER_IN_YR_NUM = 9&#xA;    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   &#xA;    &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;&#xA;GROUP BY&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    c.FSCL_YR_NUM&#xA;    ,c.FSCL_PER_IN_YR_NUM&#xA;), SQ2 AS(&#xA;SELECT     &#xA;    SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.FSCL_YR_NUM&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE&#xA;    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE&#xA;FROM SQ&#xA;GROUP BY&#xA;    SQ.FSCL_YR_NUM&#xA;    ,SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.Q2_2_TB_Score&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    SQ.RGN_ORG_LVL_DESCR&#xA;    ,SQ.FSCL_YR_NUM DESC&#xA;    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(&#xA;SELECT&#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA&#xA;FROM SQ2&#xA;GROUP BY &#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;ORDER BY&#xA;    SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_YR_NUM DESC&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM DESC)&#xA;SELECT&#xA;    SQ3.RGN_ORG_LVL_DESCR&#xA;    ,SQ3.FSCL_YR_NUM&#xA;    ,SQ3.FSCL_PER_IN_YR_NUM&#xA;    ,SQ3.CC_SCORE&#xA;    ,SQ3.SO_SCORE&#xA;    ,SQ3.CC_YOY_DELTA&#xA;    ,SQ3.SO_YOY_DELTA&#xA;FROM SQ3&#xA;    WHERE SQ3.FSCL_YR_NUM = 2018" type="Int64" />
            <Field name="FSCL_PER_IN_YR_NUM" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;  -- Compute top box scores for each question&#xA;    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END&#xA;   AS Q2_2_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_1_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_3_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_4_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_5_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_6_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_7_TB_Score&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;    AND c.FSCL_PER_IN_YR_NUM = 9&#xA;    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   &#xA;    &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;&#xA;GROUP BY&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    c.FSCL_YR_NUM&#xA;    ,c.FSCL_PER_IN_YR_NUM&#xA;), SQ2 AS(&#xA;SELECT     &#xA;    SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.FSCL_YR_NUM&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE&#xA;    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE&#xA;FROM SQ&#xA;GROUP BY&#xA;    SQ.FSCL_YR_NUM&#xA;    ,SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.Q2_2_TB_Score&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    SQ.RGN_ORG_LVL_DESCR&#xA;    ,SQ.FSCL_YR_NUM DESC&#xA;    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(&#xA;SELECT&#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA&#xA;FROM SQ2&#xA;GROUP BY &#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;ORDER BY&#xA;    SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_YR_NUM DESC&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM DESC)&#xA;SELECT&#xA;    SQ3.RGN_ORG_LVL_DESCR&#xA;    ,SQ3.FSCL_YR_NUM&#xA;    ,SQ3.FSCL_PER_IN_YR_NUM&#xA;    ,SQ3.CC_SCORE&#xA;    ,SQ3.SO_SCORE&#xA;    ,SQ3.CC_YOY_DELTA&#xA;    ,SQ3.SO_YOY_DELTA&#xA;FROM SQ3&#xA;    WHERE SQ3.FSCL_YR_NUM = 2018" type="Int64" />
            <Field name="CC_SCORE" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;  -- Compute top box scores for each question&#xA;    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END&#xA;   AS Q2_2_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_1_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_3_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_4_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_5_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_6_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_7_TB_Score&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;    AND c.FSCL_PER_IN_YR_NUM = 9&#xA;    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   &#xA;    &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;&#xA;GROUP BY&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    c.FSCL_YR_NUM&#xA;    ,c.FSCL_PER_IN_YR_NUM&#xA;), SQ2 AS(&#xA;SELECT     &#xA;    SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.FSCL_YR_NUM&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE&#xA;    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE&#xA;FROM SQ&#xA;GROUP BY&#xA;    SQ.FSCL_YR_NUM&#xA;    ,SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.Q2_2_TB_Score&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    SQ.RGN_ORG_LVL_DESCR&#xA;    ,SQ.FSCL_YR_NUM DESC&#xA;    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(&#xA;SELECT&#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA&#xA;FROM SQ2&#xA;GROUP BY &#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;ORDER BY&#xA;    SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_YR_NUM DESC&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM DESC)&#xA;SELECT&#xA;    SQ3.RGN_ORG_LVL_DESCR&#xA;    ,SQ3.FSCL_YR_NUM&#xA;    ,SQ3.FSCL_PER_IN_YR_NUM&#xA;    ,SQ3.CC_SCORE&#xA;    ,SQ3.SO_SCORE&#xA;    ,SQ3.CC_YOY_DELTA&#xA;    ,SQ3.SO_YOY_DELTA&#xA;FROM SQ3&#xA;    WHERE SQ3.FSCL_YR_NUM = 2018" type="Double" />
            <Field name="SO_SCORE" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;  -- Compute top box scores for each question&#xA;    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END&#xA;   AS Q2_2_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_1_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_3_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_4_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_5_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_6_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_7_TB_Score&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;    AND c.FSCL_PER_IN_YR_NUM = 9&#xA;    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   &#xA;    &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;&#xA;GROUP BY&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    c.FSCL_YR_NUM&#xA;    ,c.FSCL_PER_IN_YR_NUM&#xA;), SQ2 AS(&#xA;SELECT     &#xA;    SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.FSCL_YR_NUM&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE&#xA;    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE&#xA;FROM SQ&#xA;GROUP BY&#xA;    SQ.FSCL_YR_NUM&#xA;    ,SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.Q2_2_TB_Score&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    SQ.RGN_ORG_LVL_DESCR&#xA;    ,SQ.FSCL_YR_NUM DESC&#xA;    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(&#xA;SELECT&#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA&#xA;FROM SQ2&#xA;GROUP BY &#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;ORDER BY&#xA;    SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_YR_NUM DESC&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM DESC)&#xA;SELECT&#xA;    SQ3.RGN_ORG_LVL_DESCR&#xA;    ,SQ3.FSCL_YR_NUM&#xA;    ,SQ3.FSCL_PER_IN_YR_NUM&#xA;    ,SQ3.CC_SCORE&#xA;    ,SQ3.SO_SCORE&#xA;    ,SQ3.CC_YOY_DELTA&#xA;    ,SQ3.SO_YOY_DELTA&#xA;FROM SQ3&#xA;    WHERE SQ3.FSCL_YR_NUM = 2018" type="Double" />
            <Field name="CC_YOY_DELTA" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;  -- Compute top box scores for each question&#xA;    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END&#xA;   AS Q2_2_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_1_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_3_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_4_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_5_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_6_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_7_TB_Score&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;    AND c.FSCL_PER_IN_YR_NUM = 9&#xA;    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   &#xA;    &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;&#xA;GROUP BY&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    c.FSCL_YR_NUM&#xA;    ,c.FSCL_PER_IN_YR_NUM&#xA;), SQ2 AS(&#xA;SELECT     &#xA;    SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.FSCL_YR_NUM&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE&#xA;    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE&#xA;FROM SQ&#xA;GROUP BY&#xA;    SQ.FSCL_YR_NUM&#xA;    ,SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.Q2_2_TB_Score&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    SQ.RGN_ORG_LVL_DESCR&#xA;    ,SQ.FSCL_YR_NUM DESC&#xA;    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(&#xA;SELECT&#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA&#xA;FROM SQ2&#xA;GROUP BY &#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;ORDER BY&#xA;    SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_YR_NUM DESC&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM DESC)&#xA;SELECT&#xA;    SQ3.RGN_ORG_LVL_DESCR&#xA;    ,SQ3.FSCL_YR_NUM&#xA;    ,SQ3.FSCL_PER_IN_YR_NUM&#xA;    ,SQ3.CC_SCORE&#xA;    ,SQ3.SO_SCORE&#xA;    ,SQ3.CC_YOY_DELTA&#xA;    ,SQ3.SO_YOY_DELTA&#xA;FROM SQ3&#xA;    WHERE SQ3.FSCL_YR_NUM = 2018" type="Double" />
            <Field name="SO_YOY_DELTA" source="File: 32bit:oci:JUMORRIS/__EncPwd1__@SBP411.WORLD|||WITH SQ AS&#xA;(SELECT&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;  -- Compute top box scores for each question&#xA;    ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_2' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_2' THEN ce.QSTN_ID END),'0.00000') END&#xA;   AS Q2_2_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_1' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_1' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_1_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_3' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_3' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_3_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_4' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_4' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_4_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_5' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_5' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_5_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_6' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_6' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_6_TB_Score&#xA;  ,CASE WHEN COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END) = 0 THEN NULL&#xA;   ELSE TO_CHAR(SUM(CASE WHEN ce.RSPNS_ID = '7' AND ce.QSTN_ID = 'Q2_7' THEN 1 ELSE 0 END)&#xA;    / COUNT(CASE WHEN ce.QSTN_ID = 'Q2_7' THEN ce.QSTN_ID END),'0.000') END&#xA;   AS Q2_7_TB_Score&#xA;FROM APPDWH.AFT_CV_SRVY_RSPNS ce&#xA;  INNER JOIN APPDWH.ADT_CAL c&#xA;    ON TRUNC(ce.TRANS_DTM) = c.CAL_DT&#xA;    AND c.FSCL_PER_IN_YR_NUM = 9&#xA;    AND (c.FSCL_YR_NUM = 2018 OR c.FSCL_YR_NUM = 2017)   &#xA;    &#xA;  INNER JOIN APPDWH.DDM_RETAIL_ORG_STORE_DIST org&#xA;    ON ce.STORE_NUM = org.STORE_NUM&#xA;      AND org.DIV_ORG_LVL_ID IN (3,6,106)  -- U.S. company stores only (including reserve bar), but excluding New Concepts and Roastery&#xA;WHERE ce.RSPNS_ID &lt;&gt; '9'  -- rspns_id = 9 for unanswered questions&#xA;  AND ce.QSTN_ID NOT IN ('Q1','Q11') -- these questions are not in Customer Connection or Store Operations scores&#xA;&#xA;&#xA;GROUP BY&#xA;    c.FSCL_PER_IN_YR_NUM&#xA;    ,c.FSCL_YR_NUM&#xA;    ,org.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    c.FSCL_YR_NUM&#xA;    ,c.FSCL_PER_IN_YR_NUM&#xA;), SQ2 AS(&#xA;SELECT     &#xA;    SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.FSCL_YR_NUM&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;    ,ROUND(SQ.Q2_2_TB_Score,3)*100 AS CC_SCORE&#xA;    ,ROUND((AVG(SQ.Q2_1_TB_Score)+AVG(SQ.Q2_3_TB_Score)+AVG(SQ.Q2_4_TB_Score)+AVG(SQ.Q2_5_TB_Score)+AVG(SQ.Q2_6_TB_Score)+AVG(SQ.Q2_7_TB_Score))/6,3)*100 AS SO_SCORE&#xA;FROM SQ&#xA;GROUP BY&#xA;    SQ.FSCL_YR_NUM&#xA;    ,SQ.FSCL_PER_IN_YR_NUM&#xA;    ,SQ.Q2_2_TB_Score&#xA;    ,SQ.RGN_ORG_LVL_DESCR&#xA;Order BY&#xA;    SQ.RGN_ORG_LVL_DESCR&#xA;    ,SQ.FSCL_YR_NUM DESC&#xA;    ,SQ.FSCL_PER_IN_YR_NUM DESC), SQ3 AS(&#xA;SELECT&#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.CC_SCORE - lag(SQ2.CC_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS CC_YOY_DELTA&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.SO_SCORE - lag(SQ2.SO_SCORE) over(order by SQ2.RGN_ORG_LVL_DESCR, SQ2.FSCL_PER_IN_YR_NUM, SQ2.FSCL_YR_NUM) AS SO_YOY_DELTA&#xA;FROM SQ2&#xA;GROUP BY &#xA;    SQ2.FSCL_YR_NUM&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM&#xA;    ,SQ2.CC_SCORE&#xA;    ,SQ2.SO_SCORE&#xA;    ,SQ2.RGN_ORG_LVL_DESCR&#xA;ORDER BY&#xA;    SQ2.RGN_ORG_LVL_DESCR&#xA;    ,SQ2.FSCL_YR_NUM DESC&#xA;    ,SQ2.FSCL_PER_IN_YR_NUM DESC)&#xA;SELECT&#xA;    SQ3.RGN_ORG_LVL_DESCR&#xA;    ,SQ3.FSCL_YR_NUM&#xA;    ,SQ3.FSCL_PER_IN_YR_NUM&#xA;    ,SQ3.CC_SCORE&#xA;    ,SQ3.SO_SCORE&#xA;    ,SQ3.CC_YOY_DELTA&#xA;    ,SQ3.SO_YOY_DELTA&#xA;FROM SQ3&#xA;    WHERE SQ3.FSCL_YR_NUM = 2018" type="Double" />
          </RecordInfo>
        </MetaInfo>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxDbFileInput" />
    </Node>
    <Node ToolID="61">
      <GuiSettings Plugin="AlteryxBasePluginsGui.BrowseV2.BrowseV2">
        <Position x="1074" y="198" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <TempFile>C:\Users\jumorris\AppData\Local\Temp\Engine_8580_5ddeb44d7d114d66b52e8566df9e6193_\Engine_7884_2dfc65410a3541b5bdfb88d5bc46129e_.yxdb</TempFile>
          <TempFileDataProfiling />
          <Layout>
            <ViewMode>Single</ViewMode>
            <ViewSize value="100" />
            <View1>
              <DefaultTab>Profile</DefaultTab>
              <Hints>
                <Table />
              </Hints>
            </View1>
            <View2 />
          </Layout>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxBrowseV2" />
    </Node>
    <Node ToolID="62">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="1002" y="102" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>CC Scores - by Region</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="63">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="1002" y="150" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Regional; Last month of quarter</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="64">
      <GuiSettings Plugin="AlteryxRPluginGui.R">
        <Position x="690" y="150" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <RScript>#slide #11
#load data
#part 1
p1 &lt;- fread("O:/CoOp/CoOp194_PROReportng&amp;OM/Julie/earnings_Comps_by_store_US_pt1_fy18q3.csv")
#part 2
p2 &lt;- fread("O:/CoOp/CoOp194_PROReportng&amp;OM/Julie/earnings_CC_by_store_US_pt2_fy18q3.csv")

#rename merge id columns to match
setnames(p2,c("STORE_NUM"),c("STORE_NUMBER"))

#merge by store number, month, and year
pfull &lt;- Reduce(function(x,y) {merge(x,y,by=c("STORE_NUMBER","FSCL_QTR_IN_YR_NUM","FSCL_YR_NUM"),all=TRUE)}, list(p1,p2))

#aggregate
pagg &lt;- pfull[, lapply(.SD, sum, na.rm=T), .SDcols=c("Q2_2_RESPONSE_TOTAL","Q2_2_TB_CNT",
                                                     "QuarterlySales","LYQuarterlySales"),
              by=c("STORE_NUMBER","FSCL_YR_NUM")]
# pagg[, FSCL_YR_NUM := "Rolling 3"]

#calculate CC  top box score
pagg[, Q2_2_TB_SCORE := round(Q2_2_TB_CNT/Q2_2_RESPONSE_TOTAL,4)]
#pagg &lt;- pagg[Q2_2_TB_SCORE&gt;=-.15&amp;Q2_2_TB_SCORE&lt;=.45]

#drop if stores don't have LYQuarterlySales
pagg &lt;- na.omit(pagg, cols=c("QuarterlySales", "LYQuarterlySales"))
pagg &lt;- pagg[QuarterlySales&gt;0&amp;LYQuarterlySales&gt;0]
pagg &lt;- pagg[QuarterlySales&gt;=275000&amp;LYQuarterlySales&gt;=50000]

#calculate comps
pagg[, comps := (QuarterlySales-LYQuarterlySales)/LYQuarterlySales]
pagg &lt;- pagg[comps&gt;=-.25&amp;comps&lt;=.55]

#keep only FY17Q4
#pagg &lt;- pagg[FSCL_QTR_IN_YR_NUM==4&amp;FISCAL_YEAR_NUMBER==2017]

#split by cc
prob = c(1/4, 2/4, 3/4, 1)
temp &lt;- pagg %&gt;% group_by(FSCL_YR_NUM) %&gt;% summarise( 
  cc25 = quantile(Q2_2_TB_SCORE, probs = prob[1], na.rm = T), 
  cc50 = quantile(Q2_2_TB_SCORE, probs = prob[2], na.rm = T),
  cc75 = quantile(Q2_2_TB_SCORE, probs = prob[3], na.rm = T),
  cc100 = quantile(Q2_2_TB_SCORE, probs = prob[4], na.rm = T)
)
pagg &lt;- left_join(pagg, temp, by=c("FSCL_YR_NUM"))
setDT(pagg)

#recode cc based on quartiles
pagg[Q2_2_TB_SCORE &lt;= cc25, ccquartile := 1]
pagg[Q2_2_TB_SCORE &gt; cc25 &amp; Q2_2_TB_SCORE &lt;= cc50, ccquartile := 2]
pagg[Q2_2_TB_SCORE &gt; cc50 &amp; Q2_2_TB_SCORE &lt;= cc75, ccquartile := 3]
pagg[Q2_2_TB_SCORE &gt; cc75, ccquartile := 4]

#calculate top box score for cc, by comps quartile
pagg &lt;- pagg[, list(Q2_2_RESPONSE_TOTAL=sum(Q2_2_RESPONSE_TOTAL,na.rm=T),
                    Q2_2_TB_CNT=sum(Q2_2_TB_CNT,na.rm=T),
                    compsavg=(sum(QuarterlySales)-sum(LYQuarterlySales))/sum(LYQuarterlySales)),
             by="ccquartile"]
pagg[, Q2_2_TB_SCORE := Q2_2_TB_CNT/Q2_2_RESPONSE_TOTAL]
#order by quartile
pagg &lt;- setorder(pagg,ccquartile)
pagg &lt;- cbind(pagg,t(temp)[2:5])
setnames(pagg,"V2","cc_q_value")
#make more presentable
pagg[, (colnames(pagg)[4:6]) := lapply(.SD, function(x) round((x*100),1)), .SDcols=colnames(pagg)[4:6]]
pagg[, Q2_2_RESPONSE_TOTAL := NULL]; pagg[, Q2_2_TB_CNT := NULL]
setnames(pagg,"cc_q_value","ccquartile_cutoff_value")</RScript>
          <UseFullUpdate value="False" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxRPluginEngine.dll" EngineDllEntryPoint="AlteryxR" />
    </Node>
    <Node ToolID="65">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="666" y="66" width="100" height="76" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Sales Comp 
&amp; CC Scores - Quartiles</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="66">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="858" y="54" width="240" height="28" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Use Tableau Dash for consistency</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="67">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="654" y="318" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Passwords>4A7F0A578C7ABA15A9AA4FA67845CB26B41FF6E8C</Passwords>
          <File RecordLimit="" FileFormat="17">32bit:oci:JUMORRIS/__EncPwd1__@SBP416.WORLD|||SELECT DISTINCT
sr.QSTN_ID
--,sr.STORE_NUM
,ca.FSCL_YR_NUM
,ca.FSCL_QTR_IN_YR_NUM
  ,SUM(CASE  WHEN sr.RSPNS_ID = '5' AND sr.QSTN_ID = 'Q1' THEN COALESCE(w.WEIGHT_RT,1) 
    WHEN sr.RSPNS_ID = '7' THEN COALESCE(w.WEIGHT_RT,1) ELSE 0 END) AS TOTAL_TB
  ,SUM(COALESCE(w.WEIGHT_RT,1)) AS TOTAL_RSPNS
  ,ROUND(SUM(CASE  WHEN sr.RSPNS_ID = '5' AND sr.QSTN_ID = 'Q1' THEN COALESCE(w.WEIGHT_RT,1) WHEN sr.RSPNS_ID = '7' THEN COALESCE(w.WEIGHT_RT,1) ELSE 0 END) / SUM(COALESCE(w.WEIGHT_RT,1)),3)*100 AS TB_SCORE

FROM APPOTHER.AFT_CV_SRVY_RSPNS sr

JOIN APPCA.D_CAL ca
  ON ca.CAL_DT = TRUNC(sr.TRANS_DTM)
  
JOIN APPCA.D_STORE_VERS st
  ON sr.STORE_NUM = st.STORE_NUM
    AND st.CURRENT_FLG = 'Y'
    AND st.OWNR_TYPE_CD = 'CO'
    AND st.CNTRY_CD_2_DGT_ISO = 'US' 

LEFT JOIN APPOTHER.CUST_INS_WEIGHTS w
  ON sr.CASE_ID = w.CASE_ID

  WHERE sr.QSTN_ID IN ('Q2_2')
  AND sr.RSPNS_ID &lt;&gt; '9'
  AND ca.FSCL_YR_NUM IN (2017,2018) AND ca.FSCL_QTR_IN_YR_NUM = 3
GROUP BY
sr.QSTN_ID
--,sr.STORE_NUM
,ca.FSCL_YR_NUM
,ca.FSCL_QTR_IN_YR_NUM
ORDER BY 
sr.QSTN_ID
--,sr.STORE_NUM
,ca.FSCL_YR_NUM
,ca.FSCL_QTR_IN_YR_NUM</File>
          <FormatSpecificOptions>
            <ForceSqlWcharSupport>False</ForceSqlWcharSupport>
            <ReadCentroids>False</ReadCentroids>
            <TableStyle>Quoted</TableStyle>
            <NoProgress>False</NoProgress>
            <CacheData>False</CacheData>
            <PostSQL />
            <PreSQL />
          </FormatSpecificOptions>
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText>__EncPwd1__@SBP416.WORLD
Table=SELECT DISTINCT
sr.QSTN_ID
--,sr.STORE_NUM
,ca.FSCL_YR_NUM
,ca.FSCL_QTR_IN_YR_NUM
  ,SUM(CASE  WHEN sr.RSPNS_ID = '5' AND sr.QSTN_ID = 'Q1' THEN COALESCE(w.WEIGHT_RT,1) 
    WHEN sr.RSPNS_ID = '7' THEN COALESCE(w.WEIGHT_RT,1) ELSE 0 END) AS TOTAL_TB
  ,SUM(COALESCE(w.WEIGHT_RT,1)) AS TOTAL_RSPNS
  ,ROUND(SUM(CASE  WHEN sr.RSPNS_ID = '5' AND sr.QSTN_ID = 'Q1' THEN COALESCE(w.WEIGHT_RT,1) WHEN sr.RSPNS_ID = '7' THEN COALESCE(w.WEIGHT_RT,1) ELSE 0 END) / SUM(COALESCE(w.WEIGHT_RT,1)),3)*100 AS TB_SCORE

FROM APPOTHER.AFT_CV_SRVY_RSPNS sr

JOIN APPCA.D_CAL ca
  ON ca.CAL_DT = TRUNC(sr.TRANS_DTM)
  
JOIN APPCA.D_STORE_VERS st
  ON sr.STORE_NUM = st.STORE_NUM
    AND st.CURRENT_FLG = 'Y'
    AND st.OWNR_TYPE_CD = 'CO'
    AND st.CNTRY_CD_2_DGT_ISO = 'US' 

LEFT JOIN APPOTHER.CUST_INS_WEIGHTS w
  ON sr.CASE_ID = w.CASE_ID

  WHERE sr.QSTN_ID IN ('Q2_2')
  AND sr.RSPNS_ID &lt;&gt; '9'
  AND ca.FSCL_YR_NUM IN (2017,2018) AND ca.FSCL_QTR_IN_YR_NUM = 3
GROUP BY
sr.QSTN_ID
--,sr.STORE_NUM
,ca.FSCL_YR_NUM
,ca.FSCL_QTR_IN_YR_NUM
ORDER BY 
sr.QSTN_ID
--,sr.STORE_NUM
,ca.FSCL_YR_NUM
,ca.FSCL_QTR_IN_YR_NUM</DefaultAnnotationText>
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxDbFileInput" />
    </Node>
    <Node ToolID="68">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="678" y="234" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>CC Scores - by Quarter/Year</Text>
          <Font name="Segoe UI" size="8.25" style="1" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="2" />
          <Justification Justification="1" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="69">
      <GuiSettings Plugin="AlteryxGuiToolkit.TextBox.TextBox">
        <Position x="678" y="282" width="100" height="40" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Text>Topline; by quarter/year</Text>
          <Font name="Segoe UI" size="8.25" style="0" />
          <TextColor name="Black" />
          <FillColor name="White" />
          <Shape shape="0" />
          <Justification Justification="4" />
        </Configuration>
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
    </Node>
    <Node ToolID="70">
      <GuiSettings Plugin="AlteryxBasePluginsGui.BrowseV2.BrowseV2">
        <Position x="738" y="318" />
      </GuiSettings>
      <Properties>
        <Configuration />
        <Annotation DisplayMode="0">
          <Name />
          <DefaultAnnotationText />
          <Left value="False" />
        </Annotation>
      </Properties>
      <EngineSettings EngineDll="AlteryxBasePluginsEngine.dll" EngineDllEntryPoint="AlteryxBrowseV2" />
    </Node>
  </Nodes>
  <Connections>
    <Connection>
      <Origin ToolID="5" Connection="Output" />
      <Destination ToolID="6" Connection="Input" />
    </Connection>
    <Connection>
      <Origin ToolID="44" Connection="Output" />
      <Destination ToolID="45" Connection="Input" />
    </Connection>
    <Connection>
      <Origin ToolID="48" Connection="Output" />
      <Destination ToolID="49" Connection="Input" />
    </Connection>
    <Connection>
      <Origin ToolID="52" Connection="Output" />
      <Destination ToolID="53" Connection="Input" />
    </Connection>
    <Connection>
      <Origin ToolID="56" Connection="Output" />
      <Destination ToolID="57" Connection="Input" />
    </Connection>
    <Connection>
      <Origin ToolID="60" Connection="Output" />
      <Destination ToolID="61" Connection="Input" />
    </Connection>
    <Connection>
      <Origin ToolID="67" Connection="Output" />
      <Destination ToolID="70" Connection="Input" />
    </Connection>
  </Connections>
  <Properties>
    <Memory default="True" />
    <GlobalRecordLimit value="0" />
    <TempFiles default="True" />
    <Annotation on="True" includeToolName="False" />
    <ConvErrorLimit value="10" />
    <ConvErrorLimit_Stop value="False" />
    <CancelOnError value="False" />
    <DisableBrowse value="False" />
    <EnablePerformanceProfiling value="False" />
    <DisableAllOutput value="False" />
    <ShowAllMacroMessages value="False" />
    <ShowConnectionStatusIsOn value="True" />
    <ShowConnectionStatusOnlyWhenRunning value="True" />
    <ZoomLevel value="0" />
    <LayoutType>Horizontal</LayoutType>
    <MetaInfo>
      <NameIsFileName value="True" />
      <Name>2018-04-04_USCO_Earnings</Name>
      <Description />
      <RootToolName />
      <ToolVersion />
      <ToolInDb value="False" />
      <CategoryName />
      <SearchTags />
      <Author />
      <Company />
      <Copyright />
      <DescriptionLink actual="" displayed="" />
      <Example>
        <Description />
        <File />
      </Example>
    </MetaInfo>
    <Events>
      <Enabled value="True" />
    </Events>
  </Properties>
</AlteryxDocument>